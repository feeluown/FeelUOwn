版本变更历史
----------------------

3.8.13 (2023-07-30)
""""""""""""""""""""""
- 缺陷修复
  - 修复第一次生成图标可能失败的问题 #719
  - 兼容 pydantic v2 #718
  - 修复一个插件加载失败可能会后续所有插件的问题 #711

- 功能增强
  - 增加一个“想听”的默认收藏集
  - 在歌曲右键菜单中加入“播放 MV”动作
  - 小幅调整 UI，用程序画图标

3.8.12 (2023-06-08)
""""""""""""""""""""""
- 功能增强

  - 支持对媒体资源指定 http_proxy #697
  - 歌词窗口大小可以随歌词长短自动变化 #693
  - 媒体资源加载失败时，显示错误信息 #698
  - 专辑列表页面展示专辑发布时期 #703

- 缺陷修复

  - 修复往播放列表拖拽歌曲时可能会 crash 的问题 #706
  - 修复部分资源提供方歌手图片加载失败的问题 #685
  - nowplaying(macos,mpris2) 若干功能增强或问题修复 #687 #688 #692 #690

- 其他

  - 所有插件理论上都可以基于这个版本来去除对 feeluown.models 包的依赖
  - 修复 windows 安装包构建问题

3.8.11 (2023-04-27)
""""""""""""""""""""""
- 新特性

  - Windows 和 macOS 平台支持 nowplaying #575 #674
  - 支持双语歌词，自滚动歌词，保存/恢复歌词窗口状态  #680

- 功能增强

  - 更清晰的渲染专辑图 #679
  - 支持使用系统图片浏览器查看专辑原始图片 #679
  - 启动速度大幅提升（Windows 平台） #678
  - 大幅减少歌曲播放时的 CPU 资源消耗 #670 #671

- 缺陷修复

  - 修复评论列表高度有时不对的问题 #682

- 其它

  - 发版时自动构建 macOS x86 的安装包 #675
  - 兼容 python3.11 #672

3.8.10 (2023-03-27)
""""""""""""""""""""""
- 功能增强

  - 播放队列可以滚动到当前播放歌曲 #661
  - 在 Windows (Win10) 上开箱即用 #645
  - 改进歌曲详情页 #650
  - 展示歌曲的发布日期 #647

- 缺陷修复

  - 修复窗口宽度可能边很大的问题 #658
  - 修复专辑/歌手列表页面可能无法滚动的问题 #634

- 其它

  - 发版时自动构建 Windows 的安装包
  - 给更多的包添加 type 检查，以避免一些简单的缺陷

3.8.9 (2022-12-07)
""""""""""""""""""""""
- 功能增强

  - 将搜索结果以提供方为单位来展示
  - 播放队列使用弹出方式展示，避免页面的频繁切换
  - 内置本地音乐功能（注意：不能和本地插件一起使用）
  - 页面布局微调

- 缺陷修复

  - 修复部分桌面环境中（比如 KDE）评论标题高度不够的问题

3.8.8 (2022-08-09)
""""""""""""""""""""""
- 缺陷修复

  - 修复 macOS 环境下，歌曲表格序号和时长列宽度太窄的问题
  - 修复歌曲不能拖动的问题

3.8.7 (2022-08-01)
""""""""""""""""""""""
- 缺陷修复

  - 修复长的专辑标题导致界面出现滚动条的问题
  - 修复连续播放视频时，视频窗口需要多次手动开启的问题
  - 修复 watch 模式对部分歌曲（v2 model）不管用的问题
  - 修复加载部分歌曲（v2 model) 歌手失败的问题

- 功能增强

  - 优化通知的显示

- 重构

  - 使用 isinstance 来判断 provider 支持哪些功能（partially supported）

3.8.6 (2022-06-08)
""""""""""""""""""""""
- 缺陷修复

  - 修复“最近播放”有一定概率导致应用崩溃的问题
  - 修复生成的 macOS 桌面图标可能不工作的问题

- 特性

  - 添加一个按钮来显示/隐藏左边的导航栏

3.8.5 (2022-05-05)
""""""""""""""""""""""
- 功能增强

  - 展示当前播放歌曲的专辑封面
  - 优化歌手/专辑页面的歌曲列表展示效果
  - 添加“最近播放”页面

3.8.4 (2022-02-18)
""""""""""""""""""""""
- 特性

  - 兼容 libmpv 2.0

- 重构

  - 使用新的资源管理接口(v2 model) 来处理播放列表、歌手、专辑等资源

3.8.3 (2022-02-18)
""""""""""""""""""""""
- 特性

  - [测试中] Pub/Sub 服务支持发布“播放引擎”相关的信号

- 不兼容改动

  - 修改 fuo search 命令的参数

3.8.2 (2022-01-30)
""""""""""""""""""""""
- 缺陷修复

  - 修复部分 fuo 命令不能使用的问题
  - 修复在 windows 上启动失败的问题

- 重构

  - 移除 fuocore 包

3.8.1 (2022-01-23)
""""""""""""""""""""""
- 缺陷修复

  - 修复 fuo 命令行部分命令不能使用的问题

- 重构

  - 添加 feeluown.server 包，精简 feeluown 包下的内容，将其它包分别移动到合适位置

3.8 (2022-01-15)
""""""""""""""""""""""
- 缺陷修复

  - 修复所有已知的 critical 问题，包括 #447, #524, #523。
  - 给重构的代码添加单元测试，覆盖率从 45% 提至 56%。

- 不兼容改动

  - 不再支持 Python 3.6 和 3.7。
  - rcfile 文件中通过 when 函数绑定的信号接受者，默认不再放在队列中执行，
    而是直接调用。可以通过指定 `aioqueue=False` 来保持向后兼容。举个例子：
    `when('xxx.yyy', func, aioqueue=False)` 。

3.7.14 (2021-12-17)
""""""""""""""""""""""
- 缺陷修复

  - 修复在 wayland 环境不能正确显示应用图标
  - 修复双击播放歌曲后，播放器仍处于暂停状态的问题
  - 修复部分与 Python 3.10 不兼容的问题
  - 修复比特率不显示的问题
  - 修复 RPC 接口不能正常返回的问题

3.7.13 (2021-11-21)
""""""""""""""""""""""
- 新特性

  - 播放视频时能正确的显示相关元信息
  - 提供一个机制让插件可以在播放视频时，自行在屏幕上绘制（比如绘制弹幕）

- 缺陷修复

  - 修复从播放列表移除一首歌曲时，UI 上会显示移除两首的问题
  - 修复当有一个实例启动时，第二个实例启动时会弹出提示而不是直接退出

3.7.12 (2021-10-30)
""""""""""""""""""""""
- 功能增强

  - library 模块新增 song_get_lyric 接口，并新增 VideoModel

3.7.11 (2021-09-07)
""""""""""""""""""""""
- 新特性

  - 新增“歌曲电台”功能
  - 按住 Alt 键双击歌曲，会将当前列表里所有歌曲都加入到播放列表
  - 自绘“播放列表”按钮
  - 当播放列表歌曲变化时，实时刷新 UI 上的列表
  - 添加设置页面

- 缺陷修复

  - 修复强依赖 qt 的问题
  - 尝试修复 windows 上加载不了提供方图标的问题 #498
  - 修复“列表只有一首歌时不显示”的问题 #467


3.7.10 (2021-07-16)
""""""""""""""""""""""
- 新特性

  - 在顶部添加一个标签栏，用来替换之前 checkbox 模拟的标签栏

- 功能增强

  - 优化窗口最大化时的显示效果

3.7.9 (2021-06-25)
""""""""""""""""""""""
- 功能增强

  - 支持展示歌曲的网页地址

- 缺陷修复

  - 修复 windows 上生成 icon 桌面图标的问题 #494
  - 修复 fuo add {model-v2-song} 失败的问题 #492
  - 修复第一次在 windows 启动会失败的问题 68d12f8

3.7.8 (2021-06-01)
""""""""""""""""""""""
- 功能增强

  - 添加“歌曲详情”页面
  - 加速启动速度 #475
  - 小幅调整 standby 的打分逻辑，显示 standby 的比特率 #480 #
  - 添加 NixOS 的安装文档 #479

- 缺陷修复

  - 播放部分歌曲时，mpris2 会失效
  - fuo search 命令的输出无法阅读
  - 日志以及代码 typo 等修复

3.7.7 (2021-04-23)
""""""""""""""""""""""
- 功能增强

  - 支持展示 provider 的图标（demo 状态）
  - 创建桌面图标时，使用 xdg-user-dir #473
  - ImgListView 接口改进

3.7.6 (2021-04-07)
""""""""""""""""""""""
- 缺陷修复

  - 修复不能搜索专辑的问题
  - 修复进入 PIP 模式有几率 crash 的问题

3.7.5 (2021-02-13)
""""""""""""""""""""""
- 缺陷修复

  - 修复点击 mv 按钮崩溃的问题

- 功能增强

  - 优雅的退出应用
  - 提供切换音乐源的右键菜单

- feat

  - 增加一个应用内的通知组件
  - 增加“观看”模式

3.7.4 (2021-02-12)
""""""""""""""""""""""
- 缺陷修复

  - 修复图片展示组件的部分问题 #458
  - 修复 mpris2 的部分问题
  - 修复播放模块的若干问题 #459


3.7.3 (2021-02-01)
""""""""""""""""""""""
- 缺陷修复

  - 拖动 v2-model 的歌曲时，程序崩溃
  - 特定情况下，播放器会无限循环 #456
  - 退出 app 时报错（后面还需要继续改进）

3.7.2 (2021-01-27)
""""""""""""""""""""""
- 缺陷修复

  - 当 AUDIO_SELECT_POLICY 为非 >>>/<<< 时，provider_v2 的歌曲都不能播放


3.7.1 (2021-01-26)
""""""""""""""""""""""
- 缺陷修复

  - 修复自动 fallback 功能不工作的 bug，并给 player 模块打更多日志

3.7 (2021-01-25)
""""""""""""""""""""""
- 缺陷修复

  - 修复不能正常退出的 bug

- enhancement

  - 解决 --log-to-file 默认 verbose level 较低的问题
  - 将本地收藏 Songs/Albums 统一为 Library
  - 代码结构优化

3.7b0 (2021-01-22)
""""""""""""""""""""""
- enhancement

  - 极大提高搜索速度
  - 优化歌曲评论的展示
  - 给播放控制栏添加 空格，上下左右 等快捷键用来控制播放

3.7a0 (2021-01-07)
""""""""""""""""""""""
- 新特性

  - 支持展示歌曲评论
  - 支持跳转到相似歌曲

- enhancement

  - 添加按钮清除当前播放列表

- refactor

  - 大幅重构代码结构，计划以后删除 fuocore 包，目前保持向后兼容
  - 设计 library v2 (包括 model v2)

3.6.1 (2020-12-14)
""""""""""""""""""""""
- 缺陷修复

  - libmpv 版本过高，不能播放 mv #433

- enhancement

  - 优化当前播放歌曲显示：当歌曲标题+歌手名过长时，会滚动显示 #425
  - 加强登录组件：支持网页登录 #423
  - 给部分 gui 组件添加 API 文档

3.6 (2020-11-15)
""""""""""""""""""""""
- 缺陷修复

  - 修复歌词窗口的部分问题 #413

3.6b0 (2020-11-03)
""""""""""""""""""""""
- 新特性

  - fuo 文件支持 metadata #302 (Experimental)

3.6a0 (2020-10-18)
""""""""""""""""""""""
- 新特性

  - 系统托盘
  - fuo 文件和 gui 等功能点支持视频

- 缺陷修复

  - 没有安装歌曲对应的 provider 插件时，程序崩溃 #406
  - 有时不能退出 fm 模式 #395
  - search 命令输出包含空行 #402
  - mpris 有时不更新 d3251999ff67d52c9dd19e62e9d64fd3f4f43d18


3.5.3 (2020-09-07)
""""""""""""""""""""""
- enhancement

  - 尝试给 statusline 进行一些标准化
  - 点击进度条可以调整进度

3.5.2 (2020-08-10)
""""""""""""""""""""""
- feat

  - 给视频添加控制器

- enhancement

  - 提供登录框的公共类
  - show 命令增强，支持更多路由


3.5.1 (2020-07-01)
""""""""""""""""""""""
- 缺陷修复

  - 请求歌词慢时，切换歌曲会卡顿

- feat

  - 支持画中画模式
  - 支持折叠左边列表
  - 支持右键当前正在播放的歌曲

3.5 (2020-06-12)
""""""""""""""""""""""

3.5a0 (2020-06-03)
""""""""""""""""""""""
- 去掉 Python 3.5 支持
- 修复 daemon 模式不能运行的 bug
- 修复 AUDIO_SELECT_POLICY 不生效的问题
- 兼容老版本的 libmpv（兼容 Ubuntu 18.04 ）
- 给 library 添加 `provider_added/provider_removed` 两个信号
- 添加配置项 `PROVIDERS_STANDBY`
- 添加信号 `app.ui.songs_table.about_to_show_menu`

3.4.1 (2020-03-21)
""""""""""""""""""""""
- feat: 歌词窗口
- feat: 退出时状态保存
- 功能增强:
  - 搜索功能增强
  - 加快在 windows 上的启动速度
  - 统一按钮样式，避免在 Linux/Windows 看起来奇怪
  - 右边主题样式优化
- refactor:
  - player 对象不关心 song 对象，只处理 media 对象

3.4 (2020-03-21)
""""""""""""""""""""""
- 缺陷修复: 音量滑动条随着音量变化而变化
- 缺陷修复: 遇到不能播放的歌曲时，fm 模式会自动退出

3.4b2 (2020-03-11)
""""""""""""""""""""""
- 缺陷修复: 没安装 qasync 的时候 fallback 到 daemon 模式

3.4b1 (2020-03-09)
""""""""""""""""""""""
- 缺陷修复: 修复 mpris2 不能正常启动的问题

3.4b0 (2020-03-08)
""""""""""""""""""""""


3.4a4 (2020-03-08)
""""""""""""""""""""""
- feat: add `macos_dark` theme

3.4a3 (2020-03-08)
""""""""""""""""""""""
- xxx: hide scrollbar on Linux

3.4a2 (2020-03-08)
""""""""""""""""""""""
- refactor: 亮色主题绘制背景图片

3.4a1 (2020-03-08)
""""""""""""""""""""""
- 缺陷修复: 加载 collection 失败

3.4a0 (2020-03-07)
""""""""""""""""""""""

**新特性**

- 支持 ALLOW_LAN_CONNECT 配置
- 更好的支持视频播放
- 添加 fuocore.serializers 包
- 内置 mpris2 支持

**缺陷修复**

- 使用 qasync 包替换 quamash 以支持 Python 3.8

3.3.10 (2020-02-12)
""""""""""""""""""""""
**缺陷修复**

- 修复有时激活 fm 模式失败的问题

**新特性**

- 性能：支持在 1s 内往播放列表添加上万首歌曲
- UserModel 添加 `rev_songs` 等若干属性

3.3.9 (2020-02-08)
""""""""""""""""""""
**新特性**

- 提供 FM 模式支持
- 支持从环境变量 `MPV_DYLIB_PATH` 中读取 libmpv 地址

**缺陷修复**

- 修复 `fuo add playlist` 有时不生效的问题
- 修复 `fuo status` 命令有时失败的问题

**other**

- 添加简单的集成测试

3.3.8 (2020-02-03)
""""""""""""""""""""
- 缺陷修复: app crash on non-macos

3.3.7 (2020-02-03)
""""""""""""""""""""
**新特性**

- fuo 协议支持解析 `show fuo://<provider>/playlists/<pid>/songs`
- 系统主题切换时，自动切换 feeluown 主题

**缺陷修复**

- debug 命令行选项不生效
- 修复 album 列表显示不完整的 bug
- 界面上先显示 Songs/Albums 这两个收藏集

3.3.6 (2020-01-30)
""""""""""""""""""""
- feat: 支持 genicon 子命令

3.3.5 (2020-01-30)
""""""""""""""""""""
- feat: 支持 genicon 子命令

3.3.4 (2020-01-30)
""""""""""""""""""""
- feat: 支持在 windows 下生成桌面快捷方式

3.3.3 (2020-01-29)
""""""""""""""""""""

- 缺陷修复: windows 启动失败
- 缺陷修复: macOS 生成图标失败

3.3.2 (2020-01-28)
""""""""""""""""""""

**新特性**

- 将 app 实例暴露给 fuoexec
- 支持拖拽专辑到本地收藏

**功能增强**

- 优化 歌手/专辑 简介的展示
- 优化暗色背景下，歌手图片的展示
- 支持查看专辑简介

**other**

- 为 feeluown.collection 模块添加单元测试

3.3.1 (2020-01-27)
""""""""""""""""""""
- 缺陷修复: 修复专辑列表不能显示所有专辑的 bug
- 功能增强: 绑定前进/后退快捷键
- 功能增强: 歌曲列表支持一次移出多首歌曲

3.3 (2020-01-26)
"""""""""""""""""""""
- 缺陷修复; 修复多个导致 app crash 的 bug
- feat: 新的歌手详情页界面
- 功能增强: 改善专辑列表展示
- refactor: 将 widgets 包拆分成 containers 和 widgets

3.2a0 (2019-11-26)
"""""""""""""""""""""


3.1.1 (2019-10-28)
"""""""""""""""""""""
- 缺陷修复: 正确处理 song 为 None 的情况

3.1 (2019-10-28)
"""""""""""""""""""""
- refactor: 重构 `__main__` 模块，加入 `entry_points` 包
- refactor: 加入 fuoexec 模块
- feat: 支持在 macOS 上生成 .app 文件
- feat: 支持搜索歌手，专辑，播放列表，比如 ``fuo search 理性与感性 type=album``
- feat: 可以播放 Youtube 的 url，比如 ``fuo play https://youtube.com/xxx``
- feat: 支持展示歌手专辑列表
- 功能增强: 对于大的播放列表，仍然可以播放全部
- 功能增强: 当 provider API 失效时，也能为歌曲找替代品
- 缺陷修复: 若干已知缺陷修复

3.0.1 (2019-06-30)
"""""""""""""""""""""
- 缺陷修复: 将 pytest-runner 从 setup_requires 移除

3.0 (2019-06-30)
"""""""""""""""""""""
- 修复歌曲播放不能自动 fallback
- 重新设计 feeluown.models.Media
- 支持多品质音乐选择

3.0a7 (2019-04-24)
"""""""""""""""""""""
- fuo 协议规范化

3.0a6 (2019-03-18)
""""""""""""""""""""""
- 优化 mac 全局快捷键

3.0a5 (2019-03-18)
""""""""""""""""""""""
- 大幅增强前进后退功能
- 修复重复本地收藏重复的问题
- 修复播放 mv 失败

3.0a4 (2019-03-18)
""""""""""""""""""""
- 添加前进、后退按钮
- 添加状态栏（目前支持显示插件个数）
- 支持 dark 和 light 两种主题
- 提供接口支持查看歌手的所有歌曲
- 添加 Media 类（支持无损、高、中、低质量的视音频）
- 支持播放 mv
- 集成 cli 功能

2.3 (2019-01-01)
""""""""""""""""
- 本地收藏集支持拖拽
- 在 UI 上区别不存在的歌曲

2.3a1 (2018-12-29)
""""""""""""""""""
- 限定 fuocore 版本

2.3a0 (2018-12-29)
""""""""""""""""""
- 支持 fuocore 提供的歌曲懒加载功能

2.2 (2018-12-02)
""""""""""""""""

2.2a1 (2018-11-07)
""""""""""""""""""
- 修复部分情况无法自动搜索替代歌曲

2.2a0 (2018-11-07)
""""""""""""""""""
- 添加配置模块：用户可以在 rcfile 中自定义配置
- 支持 fuo 文件：用户可以建立一个跨平台的收藏列表（收藏歌单、专辑、喜欢的用户）
- 显示当前播放歌曲的来源
- 当一个平台的某首歌不能播放时，会自动去其它平台搜索相似歌曲

2.1.1 (2018-10-08)
""""""""""""""""""
- 修复 cli 模式不返回输出的问题 #242

2.1 (2018-10-08)
""""""""""""""""
- rcfile (alpha)
  - 目前提供机制支持信号绑定
- 给左边的面板加上滚动条（参考 QQ/虾米/网易云 客户端设计）
- 限制 fuocore >= 2.1
- 支持 -v 选项：查看 feeluown 和 fuocore 版本

2.1a2 (2018-09-18)
""""""""""""""""""
- 限制 fuocore 版本

2.1a1 (2018-09-18)
""""""""""""""""""
- 支持切换播放模式 @cyliuu

2.1a0 (2018-09-10)
""""""""""""""""""
- 添加音量滑动条 `#233 <https://github.com/cosven/FeelUOwn/pull/233>`_ `@chen-chao <https://github.com/chen-chao>`_
- 更换播放控制按钮的图标
- 搜索接口支持虾米音乐
- setup 中加入 feeluown.protocol 包
- 添加播放全部的按钮

2.0.2 (2018-08-03)
""""""""""""""""""
- 调整搜索栏高度
- 给 QQ 音乐支持增加提示

2.0.1 (2018-08-03)
""""""""""""""""
- 统一都使用 mac.qss
- 修复 pypi 包中没有包含 icon 的问题

2.0 (2018-08-03)
""""""""""""""""
- 准备基本功能
- 支持从 QQ 音乐搜索歌曲
- 支持 fuo protocol

2.0a0 (2018-06-25)
""""""""""""""""""
2.0a0 版本重写了大部分逻辑，优化了代码结构

功能变动
''''''''
- 暂时去掉私人 FM 功能
- 暂时去掉每日推荐功能
- 支持本地音乐（粗糙版）
- 支持简单的浏览历史记录（粗糙版）

代码变动
''''''''
- 使用 fuocore 中提供的 Model
- 尝试类似 Component 的设计（参考 React？）大量使用 Qt 的 Model/View/Delegater 模式
- 移除 FXxxWidget：事实证明，这种规模的项目完全不需要自己对 QXxxxWidget 进行封装

1.1.1
"""""
- 使用 fuocore 新版本，修复不能播放下一首的 bug

1.1.0
"""""
- 一个相对比较稳定能用的版本

1.0.1a2
"""""""
1. 使用 fuocore 的 mpv 作为播放引擎

1.0.5.3
"""""""
1. 添加图片缓存模块
2. 添加 Playlist, Album, Artist 歌曲页面的 Cover Image 显示


1.0.5.2
"""""""
- 用虾米来补充网易云音乐
- 发送播放次数信息给网易云服务器


1.0.5
"""""
- udp server 用来接受远程命令


1.0.4.5
"""""""
- 当播放中断时，让播放器退后1秒


1.0.4.4
"""""""
- 修复部分歌曲播放导致崩溃
- 显示当前音乐加载的进度
- bitrate 修改为 320


1.0.4.3
"""""""
- 增加下载歌曲的进度条
- 重构日志记录模块

1.0.4
"""""
- 网易云音乐：下载歌曲；双击歌手浏览歌手热门歌曲；双击专辑浏览专辑歌曲
- 启动时随机显示 tips
- 把大部分提示信息改为中文


1.0.3.5
"""""""
- 修复不能正确读取用户主题的 bug
- 网易云音乐：部分歌曲获取相似歌曲失败，导致不能进入相似歌曲播放模式。对这种情况进行提示和log。


1.0.3.4
"""""""
- 把 `pycrypto` 加入依赖当中
- 加入相似歌曲模式


1.0.3.2
"""""""
- 提升部分组件性能
- 解决 neteasemusic 插件双击播放音乐时会发送两次信号
